<% # ========================================================================
   # PuyoPuyo.CoordMap Unit Test
   # ========================================================================
%>
<% content_for('final') do %>

<script>

Test.context("PuyoPuyo.CoordMap",{

    "Stored values should be remembered": function() {
	var map = PuyoPuyo.CoordMap.create();
	map.put(2, 4, "some value");
	map.put(3, 4, "something else");

	assertIdentical("some value", map.getAt(2, 4));
	assertIdentical("something else", map.getAt(3, 4));
    },

    "Absent values should be reported as null": function() {
	var map = PuyoPuyo.CoordMap.create();
	map.put(2, 4, "something");
	assertNull(map.getAt(3, 4));
    },

    "Instances should not share state": function() {
	var map = PuyoPuyo.CoordMap.create();
	var map2 = PuyoPuyo.CoordMap.create();
	map.put(2, 4, "something");

	assertNull(map2.getAt(2,4));
    },

    "Count should be updated with additions": function() {
        var map = PuyoPuyo.CoordMap.create();
        assertIdentical(0, map.get('count'));

        map.put(2, 3, "something");
        assertIdentical(1, map.get('count'));

        map.put(3, 1, "some other thing");
        assertIdentical(2, map.get('count'));

        map.put(2, 3, "something else");
        assertIdentical(2, map.get('count'));
    },

    "Adjacent cells should be partitioned according to there values": function() {
        this.assert(false, "not implemented");
    }
}) ;


if (window.main && (appMain = main)) main = null ;

</script>

<% end %>
